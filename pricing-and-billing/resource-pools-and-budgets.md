# Resource pools and budgets

Resource pools are the cost center units of Nuvolos. Resource pools are associated with the [tree structure](../features/nuvolos-basic-concepts/organisational-hierarchy.md) of Nuvolos. Organisations and spaces can be completely or partially mapped to Nuvolos via the management view of the Nuvolos resource control centre.&#x20;

{% hint style="success" %}
Resource pools hold a budget against which resources mapped to the resource pool account their usage.
{% endhint %}

{% hint style="info" %}
Please note that users cannot create resource pools in a self-service manner. Please reach out to us if you would like to originate a new resource pool - we will discuss your use case with you and offer you the most efficient layout based on your needs.
{% endhint %}

## Resource pool mappings

We call associations between resource pools and Nuvolos objects _mappings._ The following type of objects can be mapped to resource pools:

* **Organisations**: An entire organisation may be mapped to a resource pool. This means that all resource usage in the organisation will be billed against the corresponding resource pool.
* **Spaces:** An entire space may be mapped to a resource pool. All usage in the space will be billed against the corresponding resource pool.
* **Specific resource**(s) **in a space**: A particular resource or set of resources may be mapped to a resource pool. This means that for example scaled computation may be mapped to a different resource pool in a space than all other resources.

{% hint style="info" %}
It is not possible to map a specific resource in all organisation objects to a particular resource pool - this can only be done on a space-by space basis.
{% endhint %}

### **Resource types**

The following resource types are available for mapping in Nuvolos currently (the list may change with time as our offering evolves):

* **File system storage**: File system storage currently used by the user.
* **Database storage**: Database storage in the Nuvolos Scientific Data Warehouse allocated to the user.
* **Database computation**: Database computation used by querying the Nuvolos Scientific Data Warehouse.
* **HPC interactive computation**: Any usage generated by using [credit-based sizes](../features/applications/application-resources.md#size-and-price-of-an-application).&#x20;
* **Professional services:** Professional services carried out by the Nuvolos team, on agreed terms.
* **Nuvolos Compute Units**: General application runs, which count against the package-based quota specified in the service agreement.

{% hint style="warning" %}
Resource mappings are atomic: it is not possible to split the usage of a particular resource in a space between multiple resource pools. Consequently, it is **not** possible to:

* Split the file system storage between "normal" and "extra" and only allocate the "extra" to your resource pool.&#x20;
* Split the interactive high-performance computation costs in a particular space between resource pools depending on the node pool being used.

If you require such fine-grained splitting of resources, we suggest creating multiple spaces.
{% endhint %}

## Resource pool roles

The role structure of the resource pool builds on top of the Nuvolos role hierarchy while adding an additional administrative role. With respect to resource usage, you may anticipate the following patterns:

* **Instance viewers** cannot generate and resource consumption. Instance viewers may check the overall budget of their resource pool.
* **Instance editors** are able to generate resource consumption but they will not induce any change in the resource mappings of a resource pool. Instance editors may check the overall budget of their resource pool.
* **Space administrators** are able to generate resource consumption but they will not induce any change in the resource mappings of a resource pool. They are additionally able to see detailed usage of their own spaces as well as redacted information about other spaces in the resource pool.
* **Organization faculty** are able to create new spaces, thus implicitly change (by adding more objects) to the resource pool mapping, however, they may not explicitly re-map resources between resource pools.
* **Organization managers** are able to create new spaces, thus implicitly change (by adding more objects) to the resource pool mapping, however, they may not explicitly re-map resources between resource pools.
* **Resource pool managers** are able to check and modify the resource mapping of the resource pool as well as get information about the space administrators of spaces they might be interested in.

{% hint style="info" %}
New resource pools can only be created by the Nuvolos support. Please reach out to us via intercom to originate a new resource pool.
{% endhint %}

If you need to contact your resource pool manager, you can find out their email address(es) on the monitoring dashboard:

<figure><img src="../.gitbook/assets/image (132).png" alt=""><figcaption><p>Contact details for resource pool managers</p></figcaption></figure>

## Mapping spaces to resource pools

Users who are **space administrators** of a space and **resource pool managers** of a resource pool may map all extra services to resource pools they are managers of. This is particularly useful for researchers who have their own research budget and work in a shared organisation resource pool normally.

This mapping impacts:

* HPC interactive computation - any scaled application runs will be accounted against the selected resource pool.
* Database computation - any query compute time will be accounted against the selected resource pool.
* Database storage - any database storage hold of the space will be accounted against the selected resource pool.

{% hint style="info" %}
The map does not impact regular provisions, such as NCU capacity for application runs and file system storage hold.
{% endhint %}

### Mapping a space during space lifetime

If you want to change the resource pool mapping of extra services for an existing space, you need to have both **space administrator** rights and **resource pool manager** rights in the resource pool you want to map to.&#x20;

In order to change the space mapping, navigate to **Project Configuration** from the space overview and select the resource pool in the **Resource Pool selection** menu item.

{% embed url="https://youtu.be/-2V_3NTdQKU" %}

{% hint style="warning" %}
Please note that previous resource usage will not be re-mapped by changing the resource pool of a space. In order to reconcile previous usage, please reach out to our support.
{% endhint %}

### Enabling Services (Resource pool level)

Nuvolos supports video library, high-performance computing, and database tables services that can be changed in a self-service manner at three different levels: resource pool level, [organisation leve](../administration/organisation-management.md)l, and space level. Resource pool managers can change resource pool level services.

{% hint style="info" %}
Resource pool level services can only be enabled if the term of the contract allows adding additional services. If your contract does not allow for a specific service but you would like to make use of one, please reach out to support.
{% endhint %}

To review or change the service settings of your resource pool, go to the reporting dashboard as shown in the video below and change the settings by clicking on the button of the service you wish to enable.

![](../.gitbook/assets/rp_service.gif)

{% hint style="warning" %}
Resource pool level services cannot be disabled in a self-service manner. If you wish to disable a service, please reach out to us.&#x20;
{% endhint %}

## Budgets

As resource pools are associated with a list of spaces, organisations and resources, it is possible to create budgets for colleagues that share funding by setting up a resource pool for each budget. This section details some standard use cases for such budgets.

### Multiple organisations in one resource pool

It is possible to create a single resource pool that is being used by multiple organisations. This is useful if:

* The subscriber entity is very large and would like to split its Nuvolos object layout into multiple organisations.
* The subscriber entity is a conglomerate of loosely related sub-units.

### Research team with personal budgets

It is possible to create personal budgets for your research team members.&#x20;

* The research team has its own organisation.
* Each member will have their own resource pool, which is mapped to a set of spaces only.

### Research team with shared resources and personal budget on a particular resource

It is possible to create personal budgets for your research team members for only a particular resource type (in practice this is likely to be high-performance computing or data storage).&#x20;

* The research team has its own organisation.&#x20;
* Each member has their own space which is generally mapped to the main resource pool.
* The personal resource is mapped to a separate resource pool for each team member.

### Transferring credits between resource pools

It is possible to transfer credits between resource pools via the Nuvolos Web UI. This enables continuous budget updates for the use cases described above.&#x20;

Currently credit transfers are only allowed in self-service **between resource pools where the executing user is a resource pool manager in both pools**. This makes sure transactions are reversible and can be amended if needed.

{% hint style="info" %}
Choosing your resource pool manager

We recommend choosing one or more people in your team to act as a resource pool manager in all the pools related to the team. This way, these managers can transfer credits between the different pools in self-service.
{% endhint %}

If you're a resource pool manager, the **Transfer credits** button will be visible on the **Current balance** tile in the **Monitoring dashboard**:

<figure><img src="../.gitbook/assets/image (127).png" alt=""><figcaption><p>The transfer credits button is located on the current balance tile, but is only visible for resource pool managers</p></figcaption></figure>

You can send credit to any other resource pool where you're manager also. To initiate a transfer to a pool not managed by you, please reach out to support.
